import{j as e,m as F,X as q,am as I,aF as O,T as M,e as P,ap as z,b5 as Q,as as V}from"./vendor-ui-BQ6OKYYy.js";import{r as o}from"./vendor-react-e7mDCNqr.js";function B({isOpen:m,onClose:h,title:i,item:c,onSave:A,onDelete:N,fields:x}){const[n,p]=o.useState({}),[b,C]=o.useState({}),[g,S]=o.useState(!1),j=!c?.id;o.useEffect(()=>{if(c)p({...c});else{const s={};x.forEach(a=>{s[a.name]=a.type==="checkbox"?!1:""}),p(s)}},[c,x]);const l=(s,a)=>{p(u=>({...u,[s]:a})),b[s]&&C(u=>({...u,[s]:""}))},D=(s,a)=>{const u=a.split(",").map(f=>f.trim()).filter(Boolean);p(f=>({...f,[s]:u}))},d=()=>{const s={};return x.forEach(a=>{a.required&&!n[a.name]&&(s[a.name]=`${a.label} is required`)}),C(s),Object.keys(s).length===0},E=s=>{s.preventDefault(),d()&&(A(n),h())},y=()=>{N&&c?.id&&(N(c.id),h())};return m?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-slate-800 rounded-xl border border-slate-700 shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:j?`Add ${i}`:`Edit ${i}`}),e.jsx("button",{onClick:h,className:"p-1 hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(q,{className:"w-5 h-5 text-slate-400"})})]}),e.jsxs("form",{onSubmit:E,className:"p-4 space-y-4",children:[x.map(s=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:[s.label," ",s.required&&e.jsx("span",{className:"text-red-400",children:"*"})]}),s.type==="text"&&e.jsx("input",{type:"text",value:n[s.name]||"",onChange:a=>l(s.name,a.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.type==="textarea"&&e.jsx("textarea",{value:n[s.name]||"",onChange:a=>l(s.name,a.target.value),rows:4,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"}),s.type==="number"&&e.jsx("input",{type:"number",value:n[s.name]||"",onChange:a=>l(s.name,parseFloat(a.target.value)),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.type==="date"&&e.jsx("input",{type:"date",value:n[s.name]||"",onChange:a=>l(s.name,a.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.type==="select"&&s.options&&e.jsxs("select",{value:n[s.name]||"",onChange:a=>l(s.name,a.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxs("option",{value:"",children:["Select ",s.label]}),s.options.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),s.type==="checkbox"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n[s.name]||!1,onChange:a=>l(s.name,a.target.checked),className:"w-4 h-4 bg-slate-700 border-slate-600 rounded focus:ring-blue-500 text-blue-600"}),e.jsxs("span",{className:"ml-2 text-sm text-slate-300",children:["Enable ",s.label]})]}),s.type==="tags"&&e.jsxs("div",{children:[e.jsx("input",{type:"text",value:Array.isArray(n[s.name])?n[s.name].join(", "):"",onChange:a=>D(s.name,a.target.value),placeholder:"Enter tags separated by commas",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Separate tags with commas"})]}),b[s.name]&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:b[s.name]})]},s.name)),e.jsxs("div",{className:"flex justify-between pt-4 border-t border-slate-700",children:[e.jsx("div",{children:!j&&N&&e.jsx("button",{type:"button",onClick:()=>S(!0),className:"px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg transition-colors",children:e.jsx(I,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]})]})]})]}),g&&e.jsxs("div",{className:"p-4 border-t border-slate-700",children:[e.jsx("div",{className:"p-4 bg-red-600/10 border border-red-600/30 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(M,{className:"w-5 h-5 text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-400 mb-1",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-sm text-red-300",children:["Are you sure you want to delete this ",i.toLowerCase(),"? This action cannot be undone."]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete"})]})]})]})}):null}function G({title:m,items:h,fields:i,onAdd:c,onUpdate:A,onDelete:N,renderItemContent:x,emptyStateMessage:n="No items found",icon:p,color:b="blue"}){const[C,g]=o.useState(!1),[S,j]=o.useState(null),[l,D]=o.useState(""),[d,E]=o.useState(null),[y,s]=o.useState("asc"),a=()=>{j(null),g(!0)},u=t=>{j(t),g(!0)},f=t=>{t.id?A(t.id,t):c(t)},T=t=>{d===t?s(y==="asc"?"desc":"asc"):(E(t),s("asc"))},$=[...h.filter(t=>l?i.some(w=>{const r=t[w.name];return r?Array.isArray(r)?r.some(v=>v.toString().toLowerCase().includes(l.toLowerCase())):r.toString().toLowerCase().includes(l.toLowerCase()):!1}):!0)].sort((t,w)=>{if(!d)return 0;const r=t[d],v=w[d];if(r===v)return 0;const k=r>v?1:-1;return y==="asc"?k:-k}),L=i.filter(t=>t.isListColumn);return e.jsxs("div",{className:"glass-card rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[p,e.jsx("h3",{className:"text-xl font-semibold text-white",children:m})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",value:l,onChange:t=>D(t.target.value),placeholder:`Search ${m.toLowerCase()}...`,className:"w-48 pl-10 pr-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-sm text-slate-200 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:a,className:`flex items-center space-x-2 px-3 py-1.5 bg-${b}-600 hover:bg-${b}-700 rounded-lg transition-colors`,children:[e.jsx(z,{className:"w-4 h-4 text-white"}),e.jsxs("span",{className:"text-white text-sm",children:["Add ",m]})]})]})]}),L.length>0&&e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(150px,1fr))] gap-4 p-3 bg-slate-800/50 rounded-lg mb-2",children:[L.map(t=>e.jsxs("button",{className:"flex items-center space-x-1 text-sm font-medium text-slate-300 hover:text-white transition-colors",onClick:()=>T(t.name),children:[e.jsx("span",{children:t.label}),d===t.name&&e.jsx(Q,{className:`w-3 h-3 ${y==="asc"?"rotate-0":"rotate-180"}`})]},t.name)),e.jsx("div",{className:"text-sm font-medium text-slate-300",children:"Actions"})]}),e.jsx("div",{className:"space-y-3",children:$.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-400",children:n})}):$.map((t,w)=>e.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:w*.05},className:"p-4 bg-slate-800/30 rounded-lg hover:bg-slate-800/50 transition-colors",children:x?x(t):e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(150px,1fr))] gap-4 items-center",children:[L.map(r=>e.jsx("div",{children:r.type==="tags"&&Array.isArray(t[r.name])?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t[r.name].slice(0,2).map((v,k)=>e.jsx("span",{className:"text-xs bg-slate-700 text-slate-300 px-2 py-1 rounded",children:v},k)),t[r.name].length>2&&e.jsxs("span",{className:"text-xs text-slate-400",children:["+",t[r.name].length-2]})]}):e.jsx("span",{className:"text-sm text-slate-300",children:t[r.name]?.toString()||"-"})},r.name)),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>u(t),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(V,{className:"w-4 h-4 text-slate-400 hover:text-white"})}),e.jsx("button",{onClick:()=>{j(t),g(!0)},className:"p-2 hover:bg-red-600/20 rounded-lg transition-colors",children:e.jsx(I,{className:"w-4 h-4 text-slate-400 hover:text-red-400"})})]})]})},t.id))}),e.jsx(B,{isOpen:C,onClose:()=>g(!1),title:m,item:S,onSave:f,onDelete:N,fields:i})]})}export{G as C};
