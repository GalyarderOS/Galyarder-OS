import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState } from 'react';
import { motion } from 'framer-motion';
import { Shield, Lock, Key, Download, AlertTriangle, Check, Laptop, Smartphone } from 'lucide-react';
import { useSettingsStore } from '../../../../lib/stores/useSettingsStore';
export function SecuritySettings() {
    const { security, updateSecuritySetting, updatePasswordPolicy, updateDataRetention } = useSettingsStore();
    const [showBackupModal, setShowBackupModal] = useState(false);
    const [backupPassword, setBackupPassword] = useState('');
    const [backupConfirmPassword, setBackupConfirmPassword] = useState('');
    const [backupError, setBackupError] = useState('');
    const [backupSuccess, setBackupSuccess] = useState(false);
    const handleBackupData = (e) => {
        e.preventDefault();
        setBackupError('');
        // Validate backup password
        if (backupPassword.length < 8) {
            setBackupError('Password must be at least 8 characters');
            return;
        }
        if (backupPassword !== backupConfirmPassword) {
            setBackupError('Passwords do not match');
            return;
        }
        // Simulate backup process
        setTimeout(() => {
            setBackupSuccess(true);
            // Reset form after 3 seconds
            setTimeout(() => {
                setBackupSuccess(false);
                setBackupPassword('');
                setBackupConfirmPassword('');
                setShowBackupModal(false);
            }, 3000);
        }, 1500);
    };
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "bg-slate-800/40 backdrop-blur-xl border border-slate-700/60 rounded-2xl p-6", children: [_jsxs("h3", { className: "text-lg font-medium text-white mb-4 flex items-center space-x-2", children: [_jsx(Shield, { className: "w-5 h-5 text-blue-400" }), _jsx("span", { children: "Security" })] }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Two-Factor Authentication" }), _jsx("p", { className: "text-xs text-slate-400", children: "Add an extra layer of security to your account" })] }), _jsx("button", { onClick: () => updateSecuritySetting('twoFactorEnabled', !security.twoFactorEnabled), className: `w-12 h-6 ${security.twoFactorEnabled ? 'bg-emerald-600' : 'bg-slate-600'} rounded-full relative transition-colors`, children: _jsx("div", { className: `w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${security.twoFactorEnabled ? 'right-0.5' : 'left-0.5'}` }) })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Biometric Authentication" }), _jsx("p", { className: "text-xs text-slate-400", children: "Use fingerprint or face recognition to login" })] }), _jsx("button", { onClick: () => updateSecuritySetting('biometricEnabled', !security.biometricEnabled), className: `w-12 h-6 ${security.biometricEnabled ? 'bg-emerald-600' : 'bg-slate-600'} rounded-full relative transition-colors`, children: _jsx("div", { className: `w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${security.biometricEnabled ? 'right-0.5' : 'left-0.5'}` }) })] }), _jsxs("div", { children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Auto-Lock Timeout" }), _jsx("p", { className: "text-xs text-slate-400", children: "Automatically lock after inactivity" })] }), _jsxs("span", { className: "text-sm text-white", children: [security.autoLockTimeout, " minutes"] })] }), _jsx("input", { type: "range", min: "1", max: "60", step: "1", value: security.autoLockTimeout, onChange: (e) => updateSecuritySetting('autoLockTimeout', parseInt(e.target.value)), className: "w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer" }), _jsxs("div", { className: "flex justify-between text-xs text-slate-400 mt-1", children: [_jsx("span", { children: "1 min" }), _jsx("span", { children: "15 min" }), _jsx("span", { children: "30 min" }), _jsx("span", { children: "60 min" })] })] })] })] }), _jsxs("div", { className: "bg-slate-800/40 backdrop-blur-xl border border-slate-700/60 rounded-2xl p-6", children: [_jsxs("h3", { className: "text-lg font-medium text-white mb-4 flex items-center space-x-2", children: [_jsx(Key, { className: "w-5 h-5 text-purple-400" }), _jsx("span", { children: "Password Policy" })] }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Minimum Password Length" }), _jsx("p", { className: "text-xs text-slate-400", children: "Set the minimum required length" })] }), _jsxs("span", { className: "text-sm text-white", children: [security.passwordPolicy.minLength, " characters"] })] }), _jsx("input", { type: "range", min: "8", max: "24", step: "1", value: security.passwordPolicy.minLength, onChange: (e) => updatePasswordPolicy('minLength', parseInt(e.target.value)), className: "w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer" }), _jsxs("div", { className: "flex justify-between text-xs text-slate-400 mt-1", children: [_jsx("span", { children: "8" }), _jsx("span", { children: "12" }), _jsx("span", { children: "16" }), _jsx("span", { children: "24" })] })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Require Special Characters" }), _jsx("p", { className: "text-xs text-slate-400", children: "Passwords must include special characters" })] }), _jsx("button", { onClick: () => updatePasswordPolicy('requireSpecialChars', !security.passwordPolicy.requireSpecialChars), className: `w-12 h-6 ${security.passwordPolicy.requireSpecialChars ? 'bg-emerald-600' : 'bg-slate-600'} rounded-full relative transition-colors`, children: _jsx("div", { className: `w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${security.passwordPolicy.requireSpecialChars ? 'right-0.5' : 'left-0.5'}` }) })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Require Numbers" }), _jsx("p", { className: "text-xs text-slate-400", children: "Passwords must include numbers" })] }), _jsx("button", { onClick: () => updatePasswordPolicy('requireNumbers', !security.passwordPolicy.requireNumbers), className: `w-12 h-6 ${security.passwordPolicy.requireNumbers ? 'bg-emerald-600' : 'bg-slate-600'} rounded-full relative transition-colors`, children: _jsx("div", { className: `w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${security.passwordPolicy.requireNumbers ? 'right-0.5' : 'left-0.5'}` }) })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Require Uppercase Letters" }), _jsx("p", { className: "text-xs text-slate-400", children: "Passwords must include uppercase letters" })] }), _jsx("button", { onClick: () => updatePasswordPolicy('requireUppercase', !security.passwordPolicy.requireUppercase), className: `w-12 h-6 ${security.passwordPolicy.requireUppercase ? 'bg-emerald-600' : 'bg-slate-600'} rounded-full relative transition-colors`, children: _jsx("div", { className: `w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${security.passwordPolicy.requireUppercase ? 'right-0.5' : 'left-0.5'}` }) })] })] })] }), _jsxs("div", { className: "bg-slate-800/40 backdrop-blur-xl border border-slate-700/60 rounded-2xl p-6", children: [_jsxs("h3", { className: "text-lg font-medium text-white mb-4 flex items-center space-x-2", children: [_jsx(Lock, { className: "w-5 h-5 text-emerald-400" }), _jsx("span", { children: "Data & Privacy" })] }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Log Retention Period" }), _jsx("p", { className: "text-xs text-slate-400", children: "How long to keep activity logs" })] }), _jsxs("span", { className: "text-sm text-white", children: [security.dataRetention.logRetentionDays, " days"] })] }), _jsx("input", { type: "range", min: "30", max: "365", step: "30", value: security.dataRetention.logRetentionDays, onChange: (e) => updateDataRetention('logRetentionDays', parseInt(e.target.value)), className: "w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer" }), _jsxs("div", { className: "flex justify-between text-xs text-slate-400 mt-1", children: [_jsx("span", { children: "30 days" }), _jsx("span", { children: "90 days" }), _jsx("span", { children: "180 days" }), _jsx("span", { children: "365 days" })] })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Auto-Delete Inactive Data" }), _jsx("p", { className: "text-xs text-slate-400", children: "Automatically delete data that hasn't been accessed" })] }), _jsx("button", { onClick: () => updateDataRetention('autoDeleteInactive', !security.dataRetention.autoDeleteInactive), className: `w-12 h-6 ${security.dataRetention.autoDeleteInactive ? 'bg-emerald-600' : 'bg-slate-600'} rounded-full relative transition-colors`, children: _jsx("div", { className: `w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${security.dataRetention.autoDeleteInactive ? 'right-0.5' : 'left-0.5'}` }) })] }), security.dataRetention.autoDeleteInactive && (_jsxs("div", { children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Inactivity Threshold" }), _jsx("p", { className: "text-xs text-slate-400", children: "Delete data after this many days of inactivity" })] }), _jsxs("span", { className: "text-sm text-white", children: [security.dataRetention.inactiveThresholdDays, " days"] })] }), _jsx("input", { type: "range", min: "90", max: "730", step: "30", value: security.dataRetention.inactiveThresholdDays, onChange: (e) => updateDataRetention('inactiveThresholdDays', parseInt(e.target.value)), className: "w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer" }), _jsxs("div", { className: "flex justify-between text-xs text-slate-400 mt-1", children: [_jsx("span", { children: "90 days" }), _jsx("span", { children: "6 months" }), _jsx("span", { children: "1 year" }), _jsx("span", { children: "2 years" })] })] })), _jsx("div", { className: "pt-2", children: _jsxs("button", { onClick: () => setShowBackupModal(true), className: "flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-colors", children: [_jsx(Download, { className: "w-4 h-4" }), _jsx("span", { children: "Backup My Data" })] }) })] })] }), _jsxs("div", { className: "bg-slate-800/40 backdrop-blur-xl border border-slate-700/60 rounded-2xl p-6", children: [_jsx("h3", { className: "text-lg font-medium text-white mb-4", children: "Active Sessions" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex items-center justify-between p-3 bg-emerald-600/10 border border-emerald-600/20 rounded-lg", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "w-10 h-10 bg-emerald-600/20 rounded-full flex items-center justify-center", children: _jsx(Laptop, { className: "w-5 h-5 text-emerald-400" }) }), _jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Current Session" }), _jsx("p", { className: "text-xs text-slate-400", children: "MacBook Pro \u2022 San Francisco, CA" })] })] }), _jsx("div", { className: "text-xs text-emerald-400", children: "Active Now" })] }), _jsxs("div", { className: "flex items-center justify-between p-3 bg-slate-700/30 rounded-lg", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "w-10 h-10 bg-slate-600/20 rounded-full flex items-center justify-center", children: _jsx(Smartphone, { className: "w-5 h-5 text-slate-400" }) }), _jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "iPhone 13" }), _jsx("p", { className: "text-xs text-slate-400", children: "San Francisco, CA \u2022 Last active 2 hours ago" })] })] }), _jsx("button", { className: "text-xs text-red-400 hover:text-red-300 transition-colors", children: "Logout" })] }), _jsxs("div", { className: "flex items-center justify-between p-3 bg-slate-700/30 rounded-lg", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "w-10 h-10 bg-slate-600/20 rounded-full flex items-center justify-center", children: _jsx(Laptop, { className: "w-5 h-5 text-slate-400" }) }), _jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: "Windows PC" }), _jsx("p", { className: "text-xs text-slate-400", children: "New York, NY \u2022 Last active 3 days ago" })] })] }), _jsx("button", { className: "text-xs text-red-400 hover:text-red-300 transition-colors", children: "Logout" })] })] }), _jsx("div", { className: "mt-4", children: _jsx("button", { className: "text-sm text-red-400 hover:text-red-300 transition-colors", children: "Logout of all other sessions" }) })] }), showBackupModal && (_jsx("div", { className: "fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50", children: _jsxs(motion.div, { initial: { opacity: 0, scale: 0.9 }, animate: { opacity: 1, scale: 1 }, className: "bg-slate-800 border border-slate-700 rounded-xl p-6 w-full max-w-md mx-4", children: [_jsxs("h3", { className: "text-xl font-semibold text-white mb-4 flex items-center space-x-2", children: [_jsx(Download, { className: "w-5 h-5 text-blue-400" }), _jsx("span", { children: "Backup Your Data" })] }), backupSuccess ? (_jsxs("div", { className: "text-center py-6", children: [_jsx("div", { className: "w-16 h-16 bg-emerald-600/20 rounded-full flex items-center justify-center mx-auto mb-4", children: _jsx(Check, { className: "w-8 h-8 text-emerald-400" }) }), _jsx("p", { className: "text-emerald-400 font-medium mb-2", children: "Backup Created Successfully!" }), _jsx("p", { className: "text-slate-300 mb-6", children: "Your data has been encrypted and is ready to download." }), _jsx("button", { className: "px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg", children: "Download Backup File" })] })) : (_jsxs(_Fragment, { children: [_jsx("p", { className: "text-slate-300 mb-4", children: "Create an encrypted backup of all your GalyarderOS data. This backup will be password-protected." }), _jsx("div", { className: "p-3 bg-amber-600/10 border border-amber-600/20 rounded-lg mb-4", children: _jsxs("div", { className: "flex items-start space-x-2", children: [_jsx(AlertTriangle, { className: "w-4 h-4 text-amber-400 mt-0.5 flex-shrink-0" }), _jsx("p", { className: "text-xs text-amber-200", children: "Your backup will contain sensitive information. Keep it secure and remember your password - we cannot recover it for you." })] }) }), _jsxs("form", { onSubmit: handleBackupData, className: "space-y-4", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm text-slate-300 mb-1", children: "Backup Password" }), _jsx("input", { type: "password", value: backupPassword, onChange: (e) => setBackupPassword(e.target.value), className: "w-full px-3 py-2 bg-slate-700 border border-slate-600 \n                               rounded-lg text-white placeholder-slate-400 \n                               focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "Create a strong password", required: true })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm text-slate-300 mb-1", children: "Confirm Password" }), _jsx("input", { type: "password", value: backupConfirmPassword, onChange: (e) => setBackupConfirmPassword(e.target.value), className: "w-full px-3 py-2 bg-slate-700 border border-slate-600 \n                               rounded-lg text-white placeholder-slate-400 \n                               focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "Confirm your password", required: true })] }), backupError && (_jsx("div", { className: "text-red-400 text-sm", children: backupError })), _jsxs("div", { className: "flex justify-end space-x-3 pt-2", children: [_jsx("button", { type: "button", onClick: () => setShowBackupModal(false), className: "px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg", children: "Cancel" }), _jsxs("button", { type: "submit", className: "px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center space-x-2", children: [_jsx(Download, { className: "w-4 h-4" }), _jsx("span", { children: "Create Backup" })] })] })] })] }))] }) }))] }));
}
