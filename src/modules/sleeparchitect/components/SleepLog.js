import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { motion } from 'framer-motion';
import { Moon, Plus, TrendingUp, Heart, Zap } from 'lucide-react';
import { useSleepStore } from '../store/sleepStore';
export function SleepLog() {
    const { sessions } = useSleepStore();
    const formatDuration = (minutes) => {
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        return `${hours}h ${mins}m`;
    };
    const getQualityColor = (quality) => {
        if (quality >= 8)
            return 'text-emerald-400';
        if (quality >= 6)
            return 'text-amber-400';
        return 'text-red-400';
    };
    const averageQuality = sessions.reduce((sum, s) => sum + s.quality, 0) / sessions.length;
    const averageDuration = sessions.reduce((sum, s) => sum + s.duration, 0) / sessions.length;
    const averageRecovery = sessions.reduce((sum, s) => sum + s.recovery.bodyBattery, 0) / sessions.length;
    return (_jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "glass-card rounded-xl p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx(Moon, { className: "w-5 h-5 text-blue-400" }), _jsx("h3", { className: "text-xl font-semibold text-white", children: "Sleep Log" })] }), _jsxs("button", { className: "flex items-center space-x-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors", children: [_jsx(Plus, { className: "w-4 h-4 text-white" }), _jsx("span", { className: "text-white text-sm", children: "Log Sleep" })] })] }), _jsxs("div", { className: "grid grid-cols-3 gap-4 mb-6", children: [_jsxs("div", { className: "bg-slate-800/50 rounded-lg p-4 text-center", children: [_jsx(TrendingUp, { className: "w-5 h-5 text-emerald-400 mx-auto mb-2" }), _jsx("p", { className: "text-lg font-bold text-white", children: averageQuality.toFixed(1) }), _jsx("p", { className: "text-xs text-slate-400", children: "Avg Quality" })] }), _jsxs("div", { className: "bg-slate-800/50 rounded-lg p-4 text-center", children: [_jsx(Moon, { className: "w-5 h-5 text-blue-400 mx-auto mb-2" }), _jsx("p", { className: "text-lg font-bold text-white", children: formatDuration(averageDuration) }), _jsx("p", { className: "text-xs text-slate-400", children: "Avg Duration" })] }), _jsxs("div", { className: "bg-slate-800/50 rounded-lg p-4 text-center", children: [_jsx(Zap, { className: "w-5 h-5 text-amber-400 mx-auto mb-2" }), _jsxs("p", { className: "text-lg font-bold text-white", children: [Math.round(averageRecovery), "%"] }), _jsx("p", { className: "text-xs text-slate-400", children: "Recovery" })] })] }), _jsxs("div", { className: "space-y-4", children: [_jsx("h4", { className: "text-sm font-medium text-white", children: "Recent Sessions" }), sessions.slice(0, 5).map((session, index) => (_jsxs(motion.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, transition: { delay: 0.1 + index * 0.1 }, className: "p-4 bg-slate-800/30 rounded-lg", children: [_jsxs("div", { className: "flex items-center justify-between mb-3", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-white", children: new Date(session.date).toLocaleDateString() }), _jsxs("p", { className: "text-xs text-slate-400", children: [session.bedTime, " - ", session.wakeTime] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("p", { className: `text-sm font-medium ${getQualityColor(session.quality)}`, children: [session.quality, "/10"] }), _jsx("p", { className: "text-xs text-slate-400", children: formatDuration(session.duration) })] })] }), _jsxs("div", { className: "grid grid-cols-3 gap-3 text-xs", children: [_jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(Heart, { className: "w-3 h-3 text-red-400" }), _jsxs("span", { className: "text-slate-300", children: [session.recovery.restingHR, " bpm"] })] }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(TrendingUp, { className: "w-3 h-3 text-emerald-400" }), _jsxs("span", { className: "text-slate-300", children: ["HRV ", session.recovery.hrv] })] }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(Zap, { className: "w-3 h-3 text-amber-400" }), _jsxs("span", { className: "text-slate-300", children: [session.recovery.bodyBattery, "%"] })] })] }), session.notes && (_jsxs("p", { className: "text-xs text-slate-400 mt-2 italic", children: ["\"", session.notes, "\""] }))] }, session.id)))] }), _jsx("div", { className: "mt-6 p-3 bg-blue-600/20 rounded-lg", children: _jsx("p", { className: "text-sm text-blue-300", children: "\uD83D\uDE34 Your sleep quality has improved 15% this month. Keep up the consistent schedule!" }) })] }));
}
